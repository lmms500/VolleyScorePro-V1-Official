
@tailwind base;
@tailwind components;
@tailwind utilities;

/* PWA & Mobile Optimizations - True Fullscreen Reset */
html, body {
  height: 100%;
  width: 100%;
  margin: 0;
  padding: 0;
  overflow: hidden; /* Prevents scroll bounce on body */
  overscroll-behavior-y: none; /* Disables pull-to-refresh feel */
  background-color: #020617; /* Deep black backing for notch */
  
  /* Disable automatic text size adjustment */
  -webkit-text-size-adjust: 100%; 
  text-size-adjust: 100%;
  
  /* Remove tap highlight color */
  -webkit-tap-highlight-color: transparent;
  
  /* Prevent accidental selection & Context Menus (Long Press) */
  user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none; /* Disables iOS Callouts */
  
  /* Disable default touch actions */
  touch-action: none;
  
  /* Font Rendering Optimization */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

/* --- SAFE AREA UTILITIES (Tailwind Extensions) --- */
.pt-safe-top { padding-top: env(safe-area-inset-top); }
.pb-safe-bottom { padding-bottom: env(safe-area-inset-bottom); }
.pl-safe-left { padding-left: env(safe-area-inset-left); }
.pr-safe-right { padding-right: env(safe-area-inset-right); }

/* Scrollbar Hiding */
::-webkit-scrollbar { display: none; width: 0px; background: transparent; }
* { -ms-overflow-style: none; scrollbar-width: none; }

/* Global Smooth Theme Transition */
body {
  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: 300ms;
}

/* Force color-scheme */
html.dark { color-scheme: dark; }
html:not(.dark) { color-scheme: light; }

body {
  font-family: 'Inter', sans-serif;
}

/* 
  NOISE TEXTURE SYSTEM 
  Standardized noise for all interfaces.
*/
.bg-noise {
  position: fixed;
  top: 0; left: 0; width: 100vw; height: 100vh;
  pointer-events: none;
  z-index: 0;
  opacity: 0.03; /* Adjusted for visibility in both modes */
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
}

/* Reusable class for components that cover the global background */
.noise-overlay {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  opacity: 0.035;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
  mix-blend-mode: overlay;
}

/* Dark mode adjustment for noise to prevent washing out blacks */
.dark .noise-overlay {
  opacity: 0.03;
  mix-blend-mode: normal;
}

/* Re-enable touch-action for specific scrollable areas */
.custom-scrollbar, .overflow-y-auto, .overflow-x-auto { touch-action: pan-y; }
.touch-pan-x { touch-action: pan-x; }

/* Allow text selection specifically in inputs even with global disable */
input, textarea {
  user-select: text;
  -webkit-user-select: text;
}

/* Mask Utilities */
.mask-linear-fade-sides {
  -webkit-mask-image: linear-gradient(to right, transparent 0%, black 15px, black calc(100% - 15px), transparent 100%);
  mask-image: linear-gradient(to right, transparent 0%, black 15px, black calc(100% - 15px), transparent 100%);
}
.mask-linear-fade-right {
  -webkit-mask-image: linear-gradient(to right, black calc(100% - 20px), transparent 100%);
  mask-image: linear-gradient(to right, black calc(100% - 20px), transparent 100%);
}
.mask-linear-fade-left {
  -webkit-mask-image: linear-gradient(to left, black calc(100% - 20px), transparent 100%);
  mask-image: linear-gradient(to left, black calc(100% - 20px), transparent 100%);
}

.glass-hardware-accelerated {
  isolation: isolate;
  contain: paint;
  /* Removed will-change to prevent blurriness on static elements */
  /* will-change: transform, opacity; */
  will-change: auto;
}

.render-crisp {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
  shape-rendering: geometricPrecision; 
}

.gpu-layer {
    transform: translateZ(0);
    /* Removed will-change: transform to prevent persistent low-res rasterization on text */
    backface-visibility: hidden;
}

.text-optimize {
    -webkit-font-smoothing: antialiased;
    text-rendering: optimizeLegibility;
}
